<div class="container">
  <div class="col-xs-3 col-sm-3 col-md-12 col-lg-12 pt-3">
    <button
      type="button"
      class="col btn btn-danger"
      [routerLink]="['/recipes']"
    >
      Back
    </button>
  </div>

  <div class="row row-cols-1 row-cols-sm-3 justify-content-between py-3">
    <div class="col-12 col-sm-5 col-md-4 col-lg-6">
      <div class="card border-0">
        <div class="card-body">
          <h3 class="card-title text-center">Create Recipe</h3>
          <form [formGroup]="recipeForm" (ngSubmit)="createRecipe()">
            <div class="col-7 form-group pt-4">
              <label for="recipeName">Name</label>
              <input
                type="text"
                class="form-control"
                id="recipeName"
                name="recipeName"
                placeholder="Ex.Overnight Oats"
                formControlName="name"
                required
              />
            </div>
            <div class="col form-group">
              <label for="recipeDescription">Description</label>
              <textarea
                class="form-control"
                rows="4"
                id="recipeDescription"
                name="recipeDescription"
                formControlName="description"
                placeholder="Describe your recipe"
              ></textarea>
            </div>
            <div class="row">
              <div class="form-group col-3">
                <label for="recipeTime" class="form-label">Time (min)</label>
                <input
                  type="number"
                  class="form-control"
                  id="recipeTime"
                  name="recipeTime"
                  formControlName="time"
                  aria-describedby="emailHelp"
                />
              </div>

              <div class="form-group col-3">
                <label class="form-label" for="recipeCalories"
                  >Calories (kcal)</label
                >
                <input
                  type="number"
                  id="recipeCalories"
                  name="recipeCalories"
                  formControlName="calories"
                  class="form-control"
                />
              </div>
            </div>
            <div class="form-group row pt-4">
              <label for="imageInput"> <h4>Picture</h4></label>
              <input
                type="file"
                class="form-control-file"
                id="imageInput"
                accept="image/*"
                formControlName="imageUrl"
                (change)="previewImage($event)"
              />
            </div>
            <!-- ingredients section  -->
            <div formGroupName="ingredient" class="row pt-4">
              <h4>Ingredients</h4>
              <div class="col-7">
                <label for="ingredientName" class="form-label">Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="ingredientName"
                  placeholder="Ex. Banana"
                  formControlName="name"
                />
              </div>

              <div class="col-3">
                <label for="ingredientWeight" class="form-label"
                  >Weight (gr)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="ingredientWeight"
                  formControlName="weight"
                />
              </div>
              <div class="col align-self-end">
                <button
                  type="button"
                  class="btn btn-outline-secondary mt-4 border-0"
                  (click)="addIngredient()"
                >
                  Add
                </button>
              </div>
            </div>

            <!-- steps section -->
            <div class="row py-4">
              <h4>Steps</h4>
              <div class="col-10">
                <textarea
                  class="form-control"
                  rows="2"
                  id="step"
                  name="step"
                  formControlName="step"
                  placeholder="What steps should be taken?"
                ></textarea>
              </div>
              <div class="col align-self-end">
                <button
                  type="button"
                  class="btn btn-outline-secondary border-0"
                  (click)="addStep()"
                >
                  Add
                </button>
              </div>
            </div>
            <app-form-buttons
              (resetButton)="resetForm()"
              [buttonText]="'Create'"
            >
            </app-form-buttons>

            {{ recipeForm.value | json }}
          </form>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="preview-container">
        <img
          [src]="recipeForm.controls['imageUrl'].value"
          class="img-fluid rounded"
        />
      </div>
    </div>
  </div>
</div>
